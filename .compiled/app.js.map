{"version":3,"sources":["../server/app.js"],"names":["app","PORT","INDEX_PATH","adapter","FileSync","db","post","req","res","note_data","params","data","DabaseSaveNote","send","use","express","static","get","listen","console","log"],"mappings":";;AAeA;;;;AAEA;;;;AAEA;;AACA;;AAEA;;;;AAGA;;;;AAIA;;;;AAEA;AACA;;AATA;;AAPA;AAiBA,IAAMA,MAAM,wBAAZ;;AALA;;AAVA;AAlBA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AA6BA,IAAMC,OAAO,IAAb;AACA,IAAMC,aAAa,oBAAnB;;AAIA;AACA,IAAMC,UAAU,IAAIC,kBAAJ,CAAa,SAAb,CAAhB;AACA,IAAMC,KAAK,qBAAIF,OAAJ,CAAX;;AAGA,gCAAkBE,EAAlB;;AAIAL,IAAIM,IAAJ,CAAS,qBAAT,EAA+B,UAACC,GAAD,EAAKC,GAAL,EAAW;AACtC,QAAIC,YAAYF,IAAIG,MAAJ,CAAWC,IAA3B;AACAC,mBAAeP,EAAf,EAAkBI,SAAlB;AACAD,QAAIK,IAAJ,CAAS,iCAAT;AACH,CAJD;;AAMAb,IAAIc,GAAJ,CAAQC,kBAAQC,MAAR,CAAe,KAAf,CAAR;;AAGA;AACA;AACA;AACA;AACA;AACAhB,IAAIiB,GAAJ,CAAQ,qBAAR,EAA8B,UAACV,GAAD,EAAKC,GAAL,EAAW;AACrCA,QAAIK,IAAJ,CAAS,iEAAT;AACH,CAFD;AAGAb,IAAIkB,MAAJ,CAAWjB,IAAX,EAAgB,YAAI;AAChBkB,YAAQC,GAAR,CAAY,+BAAZ;AACAD,YAAQC,GAAR,4BAAqCnB,IAArC;AACH,CAHD","file":"app.js","sourcesContent":["//jump notes main server \r\n//manages saving notes\r\n//by oran c wisehacker monkey\r\n//20200224\r\n\r\n/*\r\nx web page with text box\r\nx api endpoint\r\nx save to json function\r\n-dockerize\r\n- host\r\n- finish form setup [https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/forms]\r\n- button save\r\n\r\n*/\r\nimport path from \"path\"\r\n//3d party libraries\r\nimport express from \"express\"\r\n//https://expressjs.com/en/starter/hello-world.html\r\nimport { body, validationResult } from \"express-validator/check\"\r\nimport { sanitizeBody } from \"express-validator/filter\"\r\n\r\nimport low from \"lowdb\"\r\n//https://github.com/typicode/lowdb\r\n\r\nimport FileSync from \"lowdb/adapters/FileSync\"\r\n\r\n\r\n//custom scripts\r\nimport {initalizeDatabase} from \"./helpers\"\r\n\r\n//express.js setup (web server)\r\n// https://expressjs.com/en/starter/hello-world.html\r\nconst app = express()\r\nconst PORT = 3000\r\nconst INDEX_PATH = \"/../web/index.html\"\r\n\r\n\r\n\r\n//lowdb simple json database setup\r\nconst adapter = new FileSync('db.json')\r\nconst db = low(adapter)\r\n\r\n\r\ninitalizeDatabase(db)\r\n\r\n\r\n\r\napp.post(\"/v1/note/save/:data\",(req,res)=>{\r\n    let note_data = req.params.data\r\n    DabaseSaveNote(db,note_data)\r\n    res.send(\"Note has been saved to database\");\r\n})\r\n\r\napp.use(express.static('web'))\r\n\r\n\r\n// //display the main page\r\n// app.get(\"/\",(req,res)=>{\r\n//     let index_path = \"C:/Users/oranm/github/20200224_jumpnotes_simple_v1/web/index.html\"\r\n//     res.sendFile(express.static('web')) //(\"Please use post version of the endpoint instead of get, thanks.\");\r\n// })\r\napp.get(\"/v1/note/save/:data\",(req,res)=>{\r\n    res.send(\"Please use post version of the endpoint instead of get, thanks.\");\r\n})\r\napp.listen(PORT,()=>{\r\n    console.log(\"Jump Notes Server has started\")\r\n    console.log(`Url: http://localhost:${PORT}`)\r\n})\r\n\r\n\r\n\r\n"]}